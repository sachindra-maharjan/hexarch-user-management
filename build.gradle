plugins {
    id 'java'
    id 'java-library'
    id 'io.freefair.lombok' version '8.0.1'
}

allprojects {
    group = "com.yeti.hexarch.usermgmt"
    version = "0.0.1.SHAPSHOT"

    java.sourceCompatibility(JavaVersion.VERSION_1_8)

    configurations {
        complileOnly.extendsFrom annotationProcessor
        testCompileOnly.extendsFrom annotationProcessor
        testAnnotationProcessor.extendsFrom annotationProcessor
    } 

    repositories {
        mavenLocal()
        mavenCentral()
    }

    test {
        useJUnitPlatform()
    }
    
    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }

    task('hello').doLast {
        println "I'm $project.name"
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'io.freefair.lombok'

    apply from: "$rootProject.projectDir/dependencies.gradle"

    dependencies {
       implementation(libs.guava)
       testImplementation(libsTest.jupiterApi)
       testImplementation(libsTest.jupiterEngine)
       testImplementation(libsTest.assertJ)
    }
}



